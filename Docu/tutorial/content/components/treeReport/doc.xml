<?xml version="1.0" encoding="ISO-8859-1"?>
<?xml-stylesheet type="text/xsl" href="../../../_generator/doc.xslt" media="screen" ?>
<!--
  Copyright 2010-2017 BusinessCode GmbH, Germany

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<Doc title="Tree report" xmlns="http://www.businesscode.de/schema/bcdui/doc-1.1.0" state="draft">
  <Chapter title="Tree report" type="overview">
    <Body>
      A tree report allows loading of tree-like data down to a defined level plus lazy loading of lower level
      <img src="treeReport.png"/>
      <p>
        <xml>
          <TreeReportDefinition>

            <Settings> <!-- (TODO find better filter) Are all optional with a well-known default -->
              <ExpandAll/>
              <ContextMenu/>
            </Settings>

            <Structure> <!-- TODO find better name -->
              <DimemsionRequestLevel dimensionIdRef="ctrDim"/>
              <BindingSet bindingSetIdRef="parcel"/> <!-- bRef is recomended, otherwise servlet or servlet mapping must decide -->
              <Dimensions rowDimCount="1" colMeasureCount="1">
                <Dimension id="ctrDim" bRef="ctr"/>
                <Dimension id="moDim" bRef="moName" caption="Month Name." shortCaption="Month">
                  <DimensionAttr name="sort" bRef="mo"/> <!-- Adds the max(mo) as attribute sort to column representing the dimension -->
                </Dimension>
                <Dimension bRef="product"/>
              </Dimensions>
              <Measures>
                <Measure id="m1"><ValueRef bRef="t_ontime"/></Measure>
                <Measure id="ontimePerc" caption="Performance (%)" shortCaption="Perf.">
                  <Calc operation="div"> <!-- See Calc definition -->
                   <Calc operation="add" precision="1" unit="#">
                     <ValueRef bRef="i_ontime1"/>
                     <ValueRef bRef="t_ontime2" precision="2" />
                   </Calc>
                    <ValueRef bRef="t_ontime"/>
                  </Calc>
                </Measure>
              </Measures>
              <Filter> <!-- Optional, see Filter definition, on request, sidebar filder are added with And -->
                <And>
                  <Item ref="yr" op="=" value="2010"/>
                  <Item ref="cw" op="=" value="1"/>
                </And>
              </Filter>
            </Structure>

            <DetailStructure>
              <BindingSet bindingSetIdRef="parcelDetails"/> <!-- bRef is recomended, otherwise servlet or servlet mapping must decide -->
              <Columns>
                <C id="m1"><ValueRef bRef="t_ontime"/></C>
              </Columns>
            </DetailStructure>

          </TreeReportDefinition>
        </xml>
      </p>
      Behaviour:
      <ul>
        <li>If a level is expaned and it (and all of its loaded children) has only one leaf, it is fully expanded.</li>
        <li></li>
        <li></li>
      </ul>
    </Body>
  </Chapter>
</Doc>