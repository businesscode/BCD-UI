<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="../../../_generator/doc.xslt" media="screen" ?>
<!--
  Copyright 2010-2017 BusinessCode GmbH, Germany

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<Doc title="ScoreCard report" xmlns="http://www.businesscode.de/schema/bcdui/doc-1.1.0" state="draft">
  <!--
      TODO
        <li>i,t,r / f on detail level</li>
        <li>Date for measure</li>
        <li>KPI export when KPI combines different measures from only one business object / base table</li>
        <li>Handle multi-select <- inheritance strategy</li>
        <li>Definition of dimension</li>
        <li>Storage of targets, weight (MDX)</li>
        <li>Copy KPIs between ScoreCards wizards</li>
        <li>Which measures are shown (YTD etc)</li>
        <li>Generically attached reports: KPI analysis, KPI history, KPI break done to add ScoreCard dims, Root cause, Manual KPI (measure?) entry</li>
        <li>KPI id needed?</li>
        <li>Require role model: Super admin, local admin, user with named roles; "configuration-admin"</li>
        <li>Hooks for non-standard drill-overs, exports or whatever extension to context menu</li>
        <li>Layout types</li>
        <li>Rank as aggregation?</li>
        <li>OPS-brief: rank/top/average/threshold colors</li>
        <li>How to make ScoreCard available in menu -  how to handle past ScoreCards</li>
        <li>BindingSet vs BindingGroup -> needs common parent</li>
        <li>Inheritance strategy, ytd - what distinct selects have to be fired (inheritance, row/col)</li>
        <li>Inline vs server db sc def -  ScoreCard wizard writes CLOB;; ScoreCard via XML, generic mapping from XML to db-based administration, extend Wrs by 1:n relations; XML always vs. stored in DB with initial load </li>
        <li>XInclude on request document on server instead of URL</li>
        <li>BindingSet warning if low-level access performance hit</li>
        <li>Ctr -> orig_ctr -> maintain for each measure reporting date and location</li>
        <li>click on KPI: get top 20 values with count from additional field; configure this in ScoreCard wizard</li>
        <li>hint: KPI analysis, detail export for KPIs based on measures from different base objects</li>
  -->
  <Chapter title="Scorecard overview" type="overview">
    <Body>
      A ScoreCard is a KPI based, one-stop, comprehensive overview of all aspects of an area of responsibility.
      Such an area can be a branch, a center, a customer relation, a set of products or a network.
      KPIs - key performance indicators - are aggregated values of performance, volumes, productivity, process compliance and other aspects shown with their history, trend and often a target value.
      <div style="text-align:center"><img src="scoreCardPart.png"/></div>
      To complete a KPI, a KPI break down can be attached and even a root cause analysis, providing information, which actions will have the highest improvement impact on the KPI's value.
      <p/>
      Because a ScoreCard covers different aspects as well as different business objects, like order and movement,
      and provides the best overview often associated with an incentive schema, the ScoreCard often serves as the entry point into reporting.
      This is supported via drilling over from KPIs to related reports like KPI analysis and Root cause analysis.
      <dl>
        <dt>ScoreCard report</dt>
        <dd>The ScoreCard report itself provides a comprehensive overview over the state of an area of responsibility based on all important business aspects.</dd>
        <dt>KPI analysis</dt>
        <dd>From a KPI in the ScoreCard, a drill over can be made available and the KPI can be further broken down by geography, time, weight or product for example.
            Each KPI visible on the ScoreCard can be broken down by various criteria like time or geography.
            To support this, from the ScoreCard via context menu the user can jump to a KPI analysis report.
            This view can give important insight into which parts participated most to the failures or which were the most successful.</dd>
        <dt>Root cause analysis</dt>
        <dd>From a KPI in the ScoreCard, a drill over can be made available and the indicator measures, which are part of an KPI formula, can be broken down by their root cause tree, if a root cause calculation is attached.
            The root cause calculation gives the best indication what activities will have the highest impact in improving a KPI's value.
            A break down of responsibilities for issues into the following process roles is often possible:
            <ul>
              <li>Company</li>
              <li>Business partners</li>
              <li>Force majeur</li>
              <li>Customer</li>
            </ul>
        </dd>
      </dl>
      In that sense a ScoreCard is part of a set of reports.
    </Body>
  </Chapter>

  <Chapter title="Terminology" type="overview">
    <Body>
      A ScoreCard shows its KPIs and their attributes and aspects.
      <dl>
        <dt>Measures</dt>
        <dd>Measures are aggregatable values, often calculation results, representing a measurable quantity like a count or sum of weight.
            Measures and indicator measures form the base of KPIs.</dd>
        <dt>Indicator measures</dt>
        <dd>Indicator measures are special measures, which are boolean on atomic level, representing the result of a calculation for example regarding process compliance or time compliance.
            For example whether a contract process was closed in planned time.
            Indicator measures inherit all possibilities from ordinary measures but allow additional features.</dd>
        <dt>Reporting settings</dt>
        <dd>The reporting settings are for example selected period, product, organizational and geographical settings for which a ScoreCard is shown,
            for example: Paris, May 2011. This is kept in guiStatus.</dd>
        <dt>Targets</dt>
        <dd>Targets are company defined values what value a KPI should have. The comparison of a KPI value with the target provides the achievement.
            Setting the right target can be difficult. If no targets are available, they can be left away or the previous' year performance can be chosen.
            Targets are always KPI specific and often vary between different areas of responsibility for the same KPI,
            for example different centers can have a different targets for the same productivity KPI.</dd>
        <dt>Aspects</dt>
        <dd>Aspects describe what aspects of KPIs are shown on a ScoreCard, for example performance or YTD figures, trends or achievements.
            Calculation rules of aspects are not dependent on a specific KPI but they can make use of KPI specific data and calculations.
            There are three types of aspects:
            <ul>
              <li>KpiAspects modify the KPI calculation in some way, for example YTD or previous-period performance and re-execute the clients KPI calculation.</li>
              <li>AttributeAspects load additional data like targets or comments for each KPI.</li>
              <li>MetaAspects only use other aspects in their calculation, like trend, using the performance and the previous-period performance.</li>
            </ul>
        </dd>
        <dt>Attributes</dt>
        <dd>Attributes are non-aggregatable values attached to a KPI, like comments or targets.
            Attributes are usually specific for a KPI and the point of reporting and are derived from the database.</dd>
        <dt>KPI</dt>
        <dd>A KPI represents a key performance indicator number, calculated from measures. It is often associated with targets and attributes.
            A KPI has a calculation definition, a unit, which is often percent and a description.
            The calculation definition defines how to derive the KPI from the measures for a given point of reporting, most often it is the ratio of two measures, which are up-front aggregated to the point of reporting.</dd>
        <dt>ScoreCard</dt>
        <dd>A ScoreCard or dashboard shows a set of KPIs together with their attributes and aspects and provides drill over possibilities.</dd>
        <dt>Break down</dt>
        <dd>A ScoreCard can contain a break down for KPIs regarding a dimension like geography or time.</dd>
      </dl>
    </Body>
  </Chapter>

  <Chapter title="ScoreCard configuration" type="overview">
    <Body>
      To set up a scorecard, the following steps are required:
      <ul>
        <li>Create the definition for the aggregators, i.e. define where and how to find the measures</li>
        <li>Optionally create the definition for aspects, i.e. define where and how to find additional information about Kpis like targets or previous-period performance</li>
        <li>Create the definition for all Kpis, i.e. define the calculation rules for Kpis based on the available measures.</li>
        <li>Create a page an put the component:scorecardModel tag into the body and provide it with an scc:ScorecardRefData model</li>
        <li>Add a renderer to the page, visualizing the score card data</li>
      </ul>
      The scorecard is configured with the help of a meta data model following schema http://www.businesscode.de/schema/bcdui/scorecard-1.0.0.
      A typical scorecard configuration has the following structure:
      <xml>
        <scc:ScorecardRefData id="sampleScorecard"
          xmlns:scc="http://www.businesscode.de/schema/bcdui/scorecard-1.0.0"
          xmlns:calc="http://www.businesscode.de/schema/bcdui/calc-1.0.0"
          xmlns:f="http://www.businesscode.de/schema/bcdui/filter-1.0.0"
          xmlns:wrs="http://www.businesscode.de/schema/bcdui/wrs-1.0.0"
          xmlns:wrq="http://www.businesscode.de/schema/bcdui/wrs-request-1.0.0"
          xmlns:xi="http://www.w3.org/2001/XInclude">

          <!-- This defines the parts making up the current scorecard -->
          <scc:Scorecard>

            <!-- Which kpis should show up on the current scorecard, usually different per scorecard -->
            <scc:KpiRefs>
              <scc:KpiRef idRef="kpi1"/>
              ..
            </scc:KpiRefs>

            <!-- Which aspects are to be shown in which order, for example YTD, target and so on -->
            <scc:AspectRefs>
              <scc:AspectRef idRef="aspect1"/>
              ...
            </scc:AspectRefs>

            <!-- Which categories are to be used to group the KPIs -->
            <scc:CategoryTypeRefs>
              <scc:CategoryTypeRef idRef="cat1"/>
              ...
            </scc:CategoryTypeRefs>
          </scc:Scorecard>

          <!-- This defines the KPIs, all Kpis referenced in Scorecard need to be defined here. -->
          <scc:Kpis>
            <scc:Kpi id="kpi1"><calc:Calc id="calc1"></calc:Calc></scc:Kpi>
            ...
          </scc:Kpis>

          <!-- This defines the aggregators, all aggregators referenced in Kpis used on the scorecard need to be defined here -->
          <xi:include href="myScDefinitions/aggregators.xml"/>

          <!-- This defines the aspects, all aspects used on the scorecard need to be defined here -->
          <xi:include href="myScDefinitions/aspects.xml"/>

        </scc:ScorecardRefData>
      </xml>
      The content of the scc:Scorecard element varies from scorecard to scorecard and is straight forward can easily be setup by a user or the wizard.
      <p/>
      In opposite to this, the underlying definitions for Aggregators and Aspects need some explanation and are setup once when using
      the scorecard module and only extended when new Aggregators or Aspects are introduced to the installation.
    </Body>

    <SubChapter title="Aggregators">
      <Body>
        An aggregator describes how the system can retrieve measures from the database.
        It does so by providing a template to generate an <a href="../../xmlData/doc.xml">WrsRequest</a> in form of an XSLT template.
        The scorecard provies input to this XSLT on runtime, informing about the measures needed and is also providing an optional
        <code>&lt;xsl:param name="customParameterModel"/></code> to allow the user of the scorecard model to provide any additional information.
        A sample aggregators definition looks like the following:
        <xml>

          <!-- Container for multiple aggregator definitions, sample for myScDefinitions/aggregators.xml -->
          <scc:Aggregators
            xmlns:scc="http://www.businesscode.de/schema/bcdui/scorecard-1.0.0"
            xmlns:calc="http://www.businesscode.de/schema/bcdui/calc-1.0.0"
            xmlns:f="http://www.businesscode.de/schema/bcdui/filter-1.0.0"
            xmlns:wrs="http://www.businesscode.de/schema/bcdui/wrs-1.0.0"
            xmlns:wrq="http://www.businesscode.de/schema/bcdui/wrs-request-1.0.0"
            xmlns:xi="http://www.w3.org/2001/XInclude">

            &lt;!-- An aggregator definition -->
            <scc:Aggregator id="1" caption="default">

              &lt;!-- Description on how to create a requests in the form of an XSLT -->
              <scc:WrqBuilder>
                <xsl:stylesheet version="1.0"
                  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                  xmlns:wrq="http://www.businesscode.de/schema/bcdui/wrs-request-1.0.0"
                  xmlns:f="http://www.businesscode.de/schema/bcdui/filter-1.0.0"
                  wrq:d="" f:d="">

                  <xsl:output method="xml" version="1.0" encoding="UTF-8" />

                  <xsl:param name="guiStatus"/>
                  <xsl:param name="customParameter"/>

                  <xsl:template match="/*">

                    <wrq:WrsRequest>
                      <wrq:Select>
                        <wrq:Columns>
                          <wrq:C bRef="country"/>
                          <xsl:copy-of select="/*/Aggr[@id=1]/Columns/*"/>
                        </wrq:Columns>
                        <wrq:From>
                          <wrq:BindingSet>kpi_cw</wrq:BindingSet>
                        </wrq:From>
                        <f:Filter>
                          <f:Expression bRef="measure" op="in">
                            <xsl:attribute name="value"><xsl:value-of select="/*/Aggr[@id=10]/MeasuresAsList"/></xsl:attribute>
                          </f:Expression>
                          <xsl:copy-of select="$customParameter/*/f:Filter/*"/>
                        </f:Filter>
                        <wrq:Grouping>
                          <wrq:C bRef="depot"/>
                          <wrq:C bRef="process_code_kpi"/>
                          <wrq:C bRef="measure"/>
                        </wrq:Grouping>
                      </wrq:Select>
                    </wrq:WrsRequest>

                  </xsl:template>

                </xsl:stylesheet>
              </scc:WrqBuilder>
            </scc:Aggregator>
          </scc:Aggregators>
        </xml>

      </Body>
    </SubChapter>

    <SubChapter title="Aspects">
      <Body>
        Aspects are additional information about KPIs like targets, trends ot year-to-date values.
        An aspect definition is valid across all KPIs. Aspects can provide their information in three forms.
        <dl>
          <dt>WrqBuilder</dt>
          <dd>Provides a means of generating a new request from scratch, for example to a table with target information.</dd>
          <dt>WrqModifier</dt>
          <dd>Provides a means of generating a new request from an aggregator's request, for example to the kpi table for previous period performance.</dd>
          <dt>Calc</dt>
          <dd>A calculation on to of kpi performance and other aspects, for example the trend based on (performance) / (previous period performance).
              A calc can use the operators Mul, Div, Plus, Minus. The calculation can reference values via
              <code>&lt;KpiRef/></code>, <code>&lt;AspectRef/></code> and <code>&lt;AggregatorRef/></code>.
              Keep in mind that aspects apply to each KPI.
              <ul>
                <li><code>&lt;KpiRef/></code> refers to the KPIs performance, i.e. to the Kpi's defintion.</li>
                <li><code>&lt;AspectRef idRef="asp_<i>aspId</i>_kpi_$"/></code> refers to the result of the aspect with the id <i>aspId</i> for the current kpi.</li>
                <li><code>&lt;AggregatorRef idRef="agg_<i>aggrId</i>_$.<i>prop"/></i></code> refers to the property <i>prop</i> of the lead measure of the current kpi, taken from the aggregator <i>aggrId</i>.</li>
                <li><code>&lt;AggregatorRef idRef="asp_<i>aspId</i>_agg_<i>aggrId</i>_$.<i>prop"/></i></code> refers to the property <i>prop</i> of the lead measure of the current kpi,taken from the aggregator <i>aggrId</i></li>
              </ul>
              A sample for the trend could look like:
              <xml>
                <scc:Aspect id="trend" caption="Trend"
                  xmlns:scc="http://www.businesscode.de/schema/bcdui/scorecard-1.0.0"
                  xmlns:calc="http://www.businesscode.de/schema/bcdui/calc-1.0.0">
                  <calc:Calc>
                    <calc:Div>
                      <calc:KpiRef/>
                      <calc:AspectRef idRef="asp_previousPeriod_kpi_$"/>
                    </calc:Div>
                  </calc:Calc>
                </scc:Aspect>
              </xml>
          </dd>
        </dl>
        The scorecard provides input to this XSLT on runtime, and is also providing an optional
        <code>&lt;xsl:param name="customParameterModel"/></code> to allow the user of the scorecard model to provide any additional information.
        A sample Aspects definition looks like the following:
        <xml>

          <!-- Container for multiple aspect definitions, sample for myScDefinitions/aspects.xml -->
          <scc:Aspects xmlns:scc="http://www.businesscode.de/schema/bcdui/scorecard-1.0.0">

            <!-- Sample aspect retrieving additional data by modifying an aggregator request -->
            <scc:Aspect id="prevPeriod" caption="PreviousPeriod" xmlns:scc="http://www.businesscode.de/schema/bcdui/scorecard-1.0.0">
              <scc:WrqModifier>
                <xsl:stylesheet version="1.0"
                   xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                   xmlns:f="http://www.businesscode.de/schema/bcdui/filter-1.0.0"
                   xmlns:wrq="http://www.businesscode.de/schema/bcdui/wrs-request-1.0.0"
                   wrq:d="" f:d="">
                  <xsl:output method="xml" version="1.0" encoding="UTF-8"/>
                  <xsl:template match="node()|@*">
                    <xsl:copy>
                      <xsl:apply-templates select="node()|@*"/>
                    </xsl:copy>
                  </xsl:template>
                  <xsl:template match="f:Expression[@bRef='mo']">
                    <f:Expression>
                      <xsl:attribute name="bRef"><xsl:value-of select="@bRef"/></xsl:attribute>
                      <xsl:attribute name="op"><xsl:value-of select="@op"/></xsl:attribute>
                      <xsl:attribute name="value"><xsl:value-of select="@value - 1"/></xsl:attribute>
                    </f:Expression>
                  </xsl:template>
                </xsl:stylesheet>
              </scc:WrqModifier>
            </scc:Aspect>

            <!-- Sample for an Aspect calculating a value on top of data existing at the client -->
            <scc:Aspect id="trend" caption="Trend" xmlns:scc="http://www.businesscode.de/schema/bcdui/scorecard-1.0.0">
              <Calc xmlns="http://www.businesscode.de/schema/bcdui/calc-1.0.0">
                <Div>
                  <KpiRef/>
                  <AspectRef idRef="asp_prevPeriod_kpi_$"/>
                </Div>
              </Calc>
            </scc:Aspect>
          </scc:Aspects>
        </xml>
        <b>Note</b> that due to restrictions of firefox, you need to create dummy attribues like <code>wrq:d=""</code>
           for each used namespace in embedded xslts at each xslt's root node (xsl:stylesheet).
      </Body>
    </SubChapter>
  </Chapter>

  <Chapter title="How to set up a ScoreCard and its KPIs" type="overview">
    <Body>
      To setup a ScoreCard just go into the ScoreCard wizard as a central or local administrator.
      In the wizard, the user defines the KPIs to be shown on the ScoreCard together with attributes like their name and formula,
      for example <code>kpi:= (customsFailures-keyCustomerOrders)/totalHighValueOrders</code>.
      Where necessary the targets for each level of responsibility, like center and region, will also be setup for important KPIs.
      <img style="display:block;text-align:center" src="scoreCardWizard.png"/><p/>
      In addition, a specific order can be defined and KPIs can be assigned to a place in a tree of categories.
      Defining KPIs on this level is an easy task and can be done by local administrators via the front end wizard.
      The following aspects are configured in the ScoreCard wizard for once for the ScoreCard
      <table class="propertyList">
        <tr><th>Property</th><th>Semantics</th></tr>
        <tr><td>ScoreCard name</td><td>Shown in navigation</td></tr>
        <tr><td>BindingGroup</td><td>A <a href="../../binding/doc.xml">BindingGroup</a> to connect to tables in the database</td></tr>
        <tr><td class="opt">Validity time range</td><td>Optional. Allows to restrict the time, for when the ScoreCard is available</td></tr>
        <tr><td class="opt">Roles*</td><td>Optional. If one or more roles are given, the ScoreCard is restricted to users with this role.</td></tr>
      </table>
      The following aspects are configured in the ScoreCard wizard for each KPI
      <table class="propertyList">
        <tr><th>Property</th><th>Semantics</th></tr>
        <tr><td>KPI id</td><td>Id of the KPI, unique for the ScoreCard</td></tr>
        <tr><td>KPI name</td><td>Caption for the default language</td></tr>
        <tr><td>Positive or Negative</td><td>For positive KPIs high values are better, for negative KPIs low values are better. This controls trend and failure export</td></tr>
        <tr><td>Is percent</td><td>Formatting</td></tr>
        <tr><td>Calculation</td><td>A formula based on measures, for example <code>kpi:= highValueOrders/totalHighValueOrders for product='P01'</code></td></tr>
        <tr><td class="opt">Unit</td><td>Optional. Unit caption.</td></tr>
        <tr><td class="opt">Precision</td><td>Optional. For formatting, default is 1 digit after colon.</td></tr>
        <tr><td class="opt">Description</td><td>Optional. Free formatted text, shown in the KPI's tool tip</td></tr>
        <tr><td class="opt">Weight</td><td>Optional. If weights and targets are given for one or more KPIs, an overall score is calculated based on the achievement.</td></tr>
        <tr><td class="opt">Additional&#160;properties*</td><td>Optional. One or more additional fix-string properties for solution-specific usage, can be additional information used for drill-over or layout</td></tr>
      </table>
      The values for the KPIs derived by the formula are not materialized but calculated on the fly, so that the front end can show the individual values going into the formula of the KPI.
      The ScoreCard tree can be defined free locally for the new ScoreCard or a central function can enforce the use of a pre-defined tree of categories.
    </Body>
  </Chapter>

  <Chapter title="How to setup business measures - plain and Indicator" type="overview">
    <Body>
      Business measures form the basis for KPI calculation formulas of a ScoreCard.
      Each such measure is attached to a business object like a movement, or an order. Measures can be aggregated.
      <p>
      If measures are stored on aggregated levels, the information about available measures is maintained centrally.
      Information about available measures is usually set up on release basis, while ScoreCard definition above can be changed on the fly.
      </p>
      Two base types of measures are to be considered
      <dl>
        <dt>Plain measures</dt>
        <dd>Plain measures are straight facts like the height of an order in Dollars, the weight of a shipment in kg or number of shipments.</dd>
        <dt>Indicator measures ("Indicators")</dt>
        <dd>Indicator measures are calculated (or sums of) booleans indicating whether a business object succeeded in regards of a business rule.
            For example an indicator measure will say whether an order has been processed properly in terms of time or process.
            The calculation forming an indicator can be simple as <i>order is closed</i>, or as complex as, <i>was the order processed according to the business process rules?</i>
            Complex indicator measures can be defined with the BusinessMirror and run in the warehouse, especially if process logic is to be taken into account.
        </dd>
      </dl>
      Both above types of business measures can be provided on atomic as well as on aggregated level(s).
      Providing measures on a more detailed level will allow to drill down from the ScoreCard, though.
    </Body>

    <SubChapter title="Definition of measures">
      <Body>
        Each business measure definition contains information about
        <table class="propertyList">
          <tr><th>Property</th><th>Semantics</th></tr>
          <tr><td>Id</td><td>Unique id</td></tr>
          <tr><td>Name</td><td>Caption in default language</td></tr>
          <tr><td>Business object, it applies to</td><td>for example order</td></tr>
          <tr><td>Plain or indicator</td><td> Boolean, whether the measure is of plain or of indicator type.</td></tr>
          <tr><td>BindingItemRef</td><td><a href="../../binding/doc.xml">BindingItem</a> to connect it to the base table of orders in the database.
                                         Postfixes _i, and _t determine the BindingItem for <code>i</code> and <code>t</code> values.
                                         Postfixes _o, _b, _f, _c represent the <code>i</code> value for those which failed in responsibility of
                                         company's operations, business partners, force majeur and customer</td></tr>
          <tr><td class="opt">Validity time range</td><td>Optional. Allows to restrict the time, for when the indicator calculation is available.</td></tr>
          <tr><td class="opt">Description</td><td>Optional. Free HTML formatted text, shown in tool tips to end user</td></tr>
          <tr><td class="opt">Admin description</td><td>Optional. Free formatted text, shown KPI wizard to administrator</td></tr>
          <tr style="height:2px"><td></td><td></td></tr>
          <tr><td class="opt">Aggregation</td><td>Optional. Can be sum(), max(), min(). Default is sum()</td></tr>
          <tr><td class="opt">Inheritance strategy*</td><td>Optional. Per default indicators are given at exactly one level and are aggregated up from that level.
                                                            For each dimension an aggregation strategy is set, the data is inherited from there downwards.
                                                            On the level itself and above, only values on exactly matching levels will be used.
                                                            This implies, if the level given is the lowest of the dimension, only exact matches are taken into account for all levels.
                                                            If an aggregation strategy is given, settings for "Detail" are ignored.</td></tr>
          <tr style="height:2px"><td></td><td></td></tr>
          <tr><td class="opt">Detail BindingSet</td><td>Optional. A <a href="../../binding/doc.xml">BindingSet</a> to connect to the detail table of orders in the database. Can but must not be part of BindingGroup above.</td></tr>
          <tr><td class="opt">Detail additional BindingItems*</td><td>Optional. One or more <a href="../../binding/doc.xml">BindingItem</a> in the detail BindingSet to be included in detail exports.</td></tr>
          <tr style="height:2px"><td></td><td></td></tr>
          <tr><td class="opt">Detail root cause BindingItem</td><td>Optional. For indicator measures with root causes, this values stores the root cause id.</td></tr>
          <tr><td class="opt">Detail root cause calculation id</td><td>Optional. For indicator measures this allows to jump into the root cause calculation.</td></tr>
          <tr><td class="opt">Detail root cause tree XInclude</td><td>Optional. For indicator measures with root cause calculation this is the root cause tree.</td></tr>
          <tr><td class="opt">Detail&#160;BusinessMirror&#160;calculation</td><td>Optional. For indicator measures used for displaying the BCD-BM WebDebugger flow chart for the calculation</td></tr>
        </table>
      </Body>
    </SubChapter>

    <SubChapter title="Measures on aggregated level">
      <Body>
        Business measures can be stored on aggregated level, this can be done because of performance requirements or simply because the indicators are only available down to a certain level.
        <div/>
        Plain measures are simply aggregated or provided aggregated to the appropriate level.
        <div/>
        Indicator measures are provided or aggregated up into two distinct values, <code>i</code> and <code>t</code> values,
        where <code>i</code> indicates the number of succeeded business objects and <code>t</code> indicates how many instances form the base quantity.
        <p/>
        If the measures are also provided on less aggregated levels, a drill down can be done.
        The ScoreCard and its associated reports, like KPI analysis, will choose the best fit/highest level of aggregation for each report run.
        This is done with the help of <a href="../../binding/doc.xml">BindingSetGroups</a> and needs only to be set up once.
        If it is also provided on atomic level, even a detail export for successful or failed business objects is provided.
      </Body>
    </SubChapter>

    <SubChapter title="Measures on atomic level">
      <Body>
        Providing business measures on detail level allows much more insight into the status than aggregated measures do.
        Plain measures are just stored together with the detail object's id at an appropriate place.
        <div/>
        Indicator measures on the other hand contain information about how the object complied to a certain business rule.
        Values of indicator measures on detailed level can be one of the following
        <ul>
          <li>Success - Business object did succeed regarding the business rule associated with the indicator</li>
          <li>Failure / root cause id - Business object did fail regarding the business rule with an optional failure root cause id and other additional information</li>
          <li>N/A - business rule calculation does not apply</li>
        </ul>
        An indicator measure calculation can also set additional values, for example where did the failure happen
        and even which area of responsibility caused the later failure. The latter would allow a root cause analysis.
        Information about detail level indicator, if available, is listed in the above property list.
      </Body>
    </SubChapter>

  </Chapter>

  <Chapter title="Multidimension KPI attributes" type="overview">
    <Body>
      A ScoreCard often will have attributes attached to a KPI beyond its properties, value and derived values like trend.
      Such attributes can be targets for the KPI as well as the weight a KPI is given in an overall score.
      Such an attribute does not depend on the KPI alone, but also on the specific selections of the ScoreCard in terms of time and area of responsibility.
      BCD-UI ScoreCard supports such attributes.
      Targets can be maintained on the same granularity as the associated KPIs or at a higher level, in the latter case the targets are inherited to lower levels.
      For example for one KPI the target can be given on center level, for another KPI only on global level to be applied downwards.
    </Body>
  </Chapter>


  <Chapter title="Additional configuration information" type="overview">
    <Body>
      <dl>
        <dt>Business object</dt>
        <dd>Its id, name and <a href="../../binding/doc.xml">BindingSet</a> where the object's base data is stored, in other words the detail data table for orders for example</dd>
      </dl>
      <dl>
        <dt>BCD-BusinessMirror calculation</dt>
        <dd>Id and information for which time frame which calculation was applied for the calculation</dd>
      </dl>
    </Body>
  </Chapter>

  <Chapter title="Data storage" type="overview">
    <Body>
      ScoreCard data is stored in measure terms in the ware house.
      The ScoreCard data can be stored on multiple aggregation levels, the reporting engine will always search for the level which best suites the required aggregation, i.e. the level with the highest possible aggregation.
      Optionally measures can be stored on atomic business object level, where each individual order for example is stored with its measures.
      Dimensions and plain measures can be as columns of the tables, indicator measures can also be stored as rows to extend flexibility.

      <p/>Sample aggregated table for orders with horizontal KPIs, vertical KPIs and manual KPIs:<div/>
      <table style="margin: 5 0 0 10">
        <tr><td style="vertical-align:top">
          <table class="sampleDbTable">
            <colgroup span="3" class="dims"/>
            <tr><td>mo</td><td>location</td><td>type</td><td style="border-left:3 bold">m_credit_i</td><td>m_credit_t</td><td>m_handled_i</td><td>m_handled_t</td></tr>
            <tr><td>2010-01</td><td>FRA</td><td>A</td><td style="border-left:3 bold">580</td><td>538</td><td>557</td><td>530</td></tr>
            <tr><td>2010-01</td><td>SFO</td><td>B</td><td style="border-left:3 bold">450</td><td>448</td><td>437</td><td>420</td></tr>
            <tr><td>2010-01</td><td>FRA</td><td>A</td><td style="border-left:3 bold">120</td><td>118</td><td>117</td><td>110</td></tr>
            <tr><td colspan="3">...</td></tr>
          </table>
        </td><td style="padding-left:10px">
          <table class="sampleDbTable">
            <colgroup span="4" class="dims"/>
            <tr><td>measure</td><td>mo</td><td>location</td><td>type</td><td style="border-left:3 bold">i</td><td>t</td></tr>
            <tr><td>claim</td><td>2010-01</td><td>FRA</td><td>A</td><td style="border-left:3 bold">223</td><td>222</td></tr>
            <tr><td>claim</td><td>2010-01</td><td>SFO</td><td>B</td><td style="border-left:3 bold">224</td><td>200</td></tr>
            <tr><td>claim</td><td>2010-01</td><td>FRA</td><td>A</td><td style="border-left:3 bold">334</td><td>331</td></tr>
            <tr><td>delivered</td><td>2010-01</td><td>SFO</td><td>B</td><td style="border-left:3 bold">1343</td><td>1322</td></tr>
            <tr><td colspan="4">...</td></tr>
          </table>
        </td><td style="padding-left:10px">
          <table class="sampleDbTable">
            <colgroup span="3" class="dims"/>
            <tr><td>measure</td><td>mo</td><td>location</td><td>type</td><td style="border-left:3 bold">i</td><td>t</td></tr>
            <tr><td>man_2</td><td>2010-01</td><td>FRA</td><td>A</td><td style="border-left:3 bold">545</td><td>545</td></tr>
            <tr><td>man_3</td><td>2010-01</td><td>FRA</td><td>B</td><td style="border-left:3 bold">234</td><td>220</td></tr>
            <tr><td>man_4</td><td>2010-01</td><td>SFO</td><td>A</td><td style="border-left:3 bold">325</td><td>312</td></tr>
            <tr><td>man_5</td><td>2010-01</td><td>SFO</td><td>B</td><td style="border-left:3 bold">4657</td><td>4623</td></tr>
            <tr><td colspan="3">...</td></tr>
          </table>
        </td></tr>
      </table>

      <hr/>

      <p/>Optional intermediate sample aggregated table for orders:<div/>
      <table style="margin: 5 0 0 20">
        <tr><td style="vertical-align:top">
          <table class="sampleDbTable">
            <colgroup span="4" class="dims"/>
            <tr><td>date</td><td>location</td><td>customer</td><td>type</td><td style="border-left:3 bold">m_credit_i</td><td>m_credit_t</td><td>m_handled_i</td><td>m_handled_t</td></tr>
            <tr><td>2010-01-01</td><td>FRA</td><td>C1</td><td>A</td><td style="border-left:3 bold">220</td><td>210</td><td>215</td><td>210</td></tr>
            <tr><td>2010-01-01</td><td>FRA</td><td>C1</td><td>B</td><td style="border-left:3 bold">230</td><td>210</td><td>225</td><td>210</td></tr>
            <tr><td>2010-01-01</td><td>SFO</td><td>C2</td><td>B</td><td style="border-left:3 bold">120</td><td>118</td><td>117</td><td>110</td></tr>
            <tr><td>2010-01-02</td><td>SFO</td><td>C2</td><td>B</td><td style="border-left:3 bold">120</td><td>118</td><td>117</td><td>110</td></tr>
            <tr><td colspan="4">...</td></tr>
          </table>
        </td><td style="padding-left:20px">
          <table class="sampleDbTable">
            <colgroup span="5" class="dims"/>
            <tr><td>measure</td><td>date</td><td>location</td><td>customer</td><td>type</td><td style="border-left:3 bold">i</td><td>t</td></tr>
            <tr><td>claim</td><td>2010-01-01</td><td>FRA</td><td>C1</td><td>A</td><td style="border-left:3 bold">123</td><td>122</td></tr>
            <tr><td>customs</td><td>2010-01-01</td><td>FRA</td><td>C1</td><td>A</td><td style="border-left:3 bold">145</td><td>123</td></tr>
            <tr><td>delivered</td><td>2010-01-01</td><td>SFO</td><td>C1</td><td>A</td><td style="border-left:3 bold">322</td><td>123</td></tr>
            <tr><td>claim</td><td>2010-01-01</td><td>SFO</td><td>C1</td><td>B</td><td style="border-left:3 bold">124</td><td>100</td></tr>
            <tr><td>claim</td><td>2010-01-02</td><td>HHY</td><td>C1</td><td>A</td><td style="border-left:3 bold">234</td><td>231</td></tr>
            <tr><td>customs</td><td>2010-01-02</td><td>HHY</td><td>C2</td><td>B</td><td style="border-left:3 bold">133</td><td>122</td></tr>
            <tr><td>delivered</td><td>2010-01-02</td><td>FRA</td><td>C2</td><td>B</td><td style="border-left:3 bold">1243</td><td>1222</td></tr>
            <tr><td colspan="5">...</td></tr>
          </table>
        </td></tr>
      </table>

      <hr/>

      Sample detail table for orders:<div/>
      <table style="margin: 5 0 0 20">
        <tr><td style="vertical-align:top">
          <table class="sampleDbTable">
            <colgroup span="1" class="dims"/>
            <tr><td>orderid</td><td>date</td><td>location</td><td>value</td><td>customer</td><td>account</td><td>items</td><td>agent</td><td>remarks</td><td>type</td><td style="border-left:3 bold">m_credit</td><td>m_handled</td></tr>
            <tr><td>123</td><td>2010-01-01</td><td>FRA</td><td>10.000</td><td>C1</td><td>acc_01</td><td>46</td><td>BCC</td><td>urgent</td><td>A</td><td style="border-left:3 bold">1</td><td>0</td></tr>
            <tr><td>124</td><td>2010-01-01</td><td>HHY</td><td>15.000</td><td>C2</td><td>acc_213</td><td>1224</td><td>ALK</td><td></td><td>A</td><td style="border-left:3 bold">1</td><td>1</td></tr>
            <tr><td>125</td><td>2010-01-02</td><td>SFO</td><td>1.000</td><td>C1</td><td>acc_i_6453</td><td>754</td><td>HHV</td><td></td><td>B</td><td style="border-left:3 bold">0</td><td>NULL</td></tr>
            <tr><td colspan="1">...</td></tr>
          </table>
        </td><td style="padding-left:20px">
          <table class="sampleDbTable">
            <colgroup span="1" class="dims"/>
            <tr><td>measure</td><td>order_id</td><td>location</td><td style="border-left:3 bold">i</td><td>t</td><td>add_info_1</td><td>add_info_n</td></tr>
            <tr><td>claim</td><td>123</td><td>FRA</td><td style="border-left:3 bold">1</td><td>1</td><td>broken</td><td/></tr>
            <tr><td>customs</td><td>123</td><td>FRA</td><td style="border-left:3 bold">1</td><td>1</td><td></td><td/></tr>
            <tr><td>delivered</td><td>123</td><td>FRA</td><td style="border-left:3 bold">0</td><td>1</td><td>2nd try</td><td/></tr>
            <tr><td>claim</td><td>124</td><td>SFO</td><td style="border-left:3 bold">null</td><td>0</td><td>missing</td><td/></tr>
            <tr><td>claim</td><td>125</td><td>HHY</td><td style="border-left:3 bold">1</td><td>1</td><td></td><td/></tr>
            <tr><td>customs</td><td>125</td><td>SFO</td><td style="border-left:3 bold">1</td><td>1</td><td></td><td/></tr>
            <tr><td>delivered</td><td>125</td><td>FRA</td><td style="border-left:3 bold">0</td><td>1</td><td></td><td/></tr>
            <tr><td colspan="1">...</td></tr>
          </table>
        </td></tr>
      </table>

      <p/>Sample detail table for stock items:<div/>
      <table style="margin: 5 0 0 20">
        <tr><td style="vertical-align:top">
          <table class="sampleDbTable">
            <colgroup span="2" class="dims"/>
            <tr><td>location</td><td>item_id</td><td>instorage</td><td>count</td><td>packsize</td><td>location</td><td style="border-left:3 bold">m_newpackage</td><td>m_front</td></tr>
            <tr><td>FRA</td><td>X123</td><td>2010-01-01</td><td>3453</td><td>A</td><td>loc_01</td><td style="border-left:3 bold">1</td><td>0</td></tr>
            <tr><td>HHY</td><td>Y124</td><td>2010-01-01</td><td>234</td><td>SX</td><td>loc_213</td><td style="border-left:3 bold">1</td><td>1</td></tr>
            <tr><td>FRA</td><td>Y3344</td><td>2010-01-02</td><td>54</td><td>L</td><td>loc_i_6453</td><td style="border-left:3 bold">0</td><td>NULL</td></tr>
            <tr><td colspan="2">...</td></tr>
          </table>
        </td><td style="padding-left:20px">
          <table class="sampleDbTable">
            <colgroup span="3" class="dims"/>
            <tr><td>measure_id</td><td>location</td><td>item_id</td><td style="border-left:3 bold">i</td><td>t</td><td>date</td><td>add_info_1</td><td>add_info_n</td></tr>
            <tr><td>checked</td><td>FRA</td><td>X123</td><td style="border-left:3 bold">1</td><td>1</td><td>2010-01-01</td><td/><td/></tr>
            <tr><td>complete</td><td>HHY</td><td>X123</td><td style="border-left:3 bold">1</td><td>1</td><td>2010-01-01</td><td/><td/></tr>
            <tr><td>ok</td><td>FRA</td><td>X123</td><td style="border-left:3 bold">0</td><td>1</td><td>2010-01-01</td><td/><td/></tr>
            <tr><td>claim</td><td>SFO</td><td>Y124</td><td style="border-left:3 bold">null</td><td>0</td><td>2010-01-05</td><td/><td/></tr>
            <tr><td>claim</td><td>HHY</td><td>Y3344</td><td style="border-left:3 bold">1</td><td>1</td><td>2010-01-06</td><td/><td/></tr>
            <tr><td>customs</td><td>HHY</td><td>Y3344</td><td style="border-left:3 bold">1</td><td>1</td><td>2010-01-02</td><td>re-packed</td><td/></tr>
            <tr><td>delivered</td><td>FRA</td><td>Y3344</td><td style="border-left:3 bold">0</td><td>1</td><td>2010-01-02</td><td/><td/></tr>
            <tr><td colspan="3">...</td></tr>
          </table>
        </td></tr>
      </table>

      <hr/>

      <dl class="featureList">
        <dt>Detail summary lines</dt>
        <dd>The layout support inserting summary lines for details as long as granularity is at least the same as the lowest aggregation</dd>
        <dt>Column vs row oriented indicator measures</dt>
        <dd>Measures can be stored as columns as well as rows. While the first eases building measures on top of others and is best for performance,
            the row option introduces greater flexibility as new measures can be introduced without the need to change the data model.</dd>
        <dt>Virtual measures via. BindingSet</dt>
        <dd>Measures can represent 1:1 column values of the underlying table or view.
            In addition as the <a href="../../binding/doc.xml">BindingSet</a> allows column expressions, even without changing the data model virtual measures can be created.</dd>
        <dt>Indicator measures in one value <i>'f'</i></dt>
        <dd>Indicator measures store whether the measure applies to the business object, whether the business object succeeded in regards of the measure and if not the root code id, which also allows to derive the responsible party.
            These states are either stored in i, t, and r values or can be stored in one <code>f</code> value, which can be null, 0, 1 or &gt; 1.
            This is the most compact storage. To allow <code>i</code> and <code>t</code> representing a higher multiplicity for example for summary rows, <code>f</code> needs to be extended to i, t, r then on BindingSet level.</dd>
        <dt>Manual KPIs</dt>
        <dd>Manual measures can be stored in vertical manner on aggregated level and are treated no different from measures derived from the details.</dd>
        <dt>Predefined KPIs</dt>
        <dd>Instead of allowing administrators to define KPIs from scratch, it is also possible to pre-define KPIs by the super administrator and only allow local administrators to choose from a KPI list for his/her Scorecard definition.</dd>
        <dt>KPI detail export</dt>
        <dd>If configured, the detail data behind the measures of a KPI can be exported from the ScoreCard and the KPI analysis, taking all filters into account.
            This detail export can also be restricted to a failure-detail export.</dd>
      </dl>

    </Body>
  </Chapter>

  <Chapter title="Some background" type="overview">
    <Body>
      <ul>
        <li>The ScoreCard as all other parts of BCD-UI does not require proprietary storage. All data is stored in the assigned data warehouse and is accessible to other applications.</li>
        <li>All calculations including root cause are done in the data warehouse with the help of elaborated SQL.</li>
      </ul>
    </Body>
  </Chapter>


  <Chapter title="Sample configurations" type="example">
    <Body>
      The following document shows a sample ScoreCard in XML

      Configuration of a ScoreCard is done in the following format.
      <xml>
        <ScoreCard name="Standard" id="default">

          <Roles> <!-- Optional restriction -->
            <Role>Manager</Role>
            <Role>Reporter</Role>
          </Roles>

          <Categories>
            <XInlude href="/categories/defaultCategories.xml"/>
          </Categories>

          <Kpi id="simple" category="ALL">
            <Value> <ValueRef bRef="t_volume" caption="# shipments"/> </Value>
            <DefaultAttributes positive="true" description="Total shipments"/>
          </Kpi>

          <Kpi id="pickupOntime" name="ACB Ontime" category="Product specific">
            <Value>
              <Calc operation="div" precision="1" unit="#" for="product='ACB'"> <!-- This is evaluated on the client -->
                <ValueRef measureRef="ontime_i"/>
                <ValueRef measureRef="ontime_t"/>
              </Calc>
            </Value>
            <DefaultAttributes positive="true" description="Percentage of shipments being picked up ontime"/>
            <HTMLDescription>&lt;![CDATA[This KPI takes all <b>non-ghost</b> shipments for ABC products into account]]&gt;</HTMLDescription>
            <AdditionalAttributes direction="OB"/> <!-- Application specific -->
          </Kpi>

          <Kpi>...</Kpi>

        </ScoreCard>
      </xml>

      Configuration of an indicator is done in the following format.
      <xml>
        <Indicators id="Order">

          <Indicator id="CustomsFailed">
            <Name>Success in customs handling</Name>
            <BusinessObject>Order</BusinessObject>
            <IsIndicator>true</IsIndicator>
            <BindingItemRef>customsFailed</BindingItemRef>
            <BindingGroup>ScoreCardBG</BindingGroup>

            <DetailBindingSet>OrdersBS</DetailBindingSet>
            <DetailBindingItemRefs>
              <DetailBindingItemRef>date</DetailBindingItemRef>
              <DetailBindingItemRef>customer</DetailBindingItemRef>
              <DetailBindingItemRef>value</DetailBindingItemRef>
              <DetailBindingItemRef>customsFailure</DetailBindingItemRef>
            </DetailBindingItemRefs>
          </Indicator>

          <Indicator>...</Indicator>

        </Indicators>
      </xml>

      Configuration of dimensions for drilling is done as follows:
      <xml>
        <DimensionType typeId="timeMo" axis="time">
          <Year bindingItem="yr">
            <Month bindingItem="mo">
              <Date bindingItem="dy"/>
            </Month>
          </Year>
        </DimensionType>

        <DimensionType typeId="timeCw" axis="time">
          <CwYear bindingItem="cwyr">
            <Cw bindingItem="cw">
              <Date bindingItem="dy"/>
            </Cw>
          </CwYear>
        </DimensionType>

        <Dimension id="reportTimeMo" type="timeMo"/>
        <Dimension id="reportTimeCw" type="timeCw"/>

        <Dimension id="puTimeMo" type="timeMo" prefix="pu_"/>
        <Dimension id="puTimeCw" type="timeCw" prefix="pu_"/>

        <Dimension id="delTimeMo" type="timeMo" prefix="del_"/>
        <Dimension id="delTimeCw" type="timeCw" prefix="del_"/>
      </xml>

      Details:
      <img src="scorecard-1.0.0.xsd.png"/>
    </Body>
  </Chapter>

</Doc>

