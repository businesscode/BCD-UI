<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="../../../_generator/doc.xslt" media="screen" ?>
<!--
  Copyright 2010-2017 BusinessCode GmbH, Germany

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<doc:Doc title="Getting Started" xmlns:doc="http://www.businesscode.de/schema/bcdui/doc-1.1.0">
  <doc:Chapter title="Overview" type="overview">
    <doc:Body>
    This section is about creating a simple BCD-UI project in eclipse IDE and build it with gradle.
    The BCD-UI project has security enabled and requires authentication. It has a simple page with database content 
    depending on user input. The tutorials shows the setup in the popular IDE eclipse, but can be done with other tools as well.
    
     <div>The steps to create the Gettting Started application are:
       <ol>
         <li>Development environment setup.
          Get Java, Eclipse and Tomcat to set up your development environment.</li>
         <li>Application setup</li>
         <li>Connect the web application to a database</li>
         <li>Create Login Page</li>
         <li>Create a simple request Page</li>
      </ol>
      Each step is described in the following sub chapters.
     </div>
     </doc:Body>
   </doc:Chapter>  
   <doc:Chapter title="Step by step">
    <doc:SubChapter title="Development environment setup">
      <doc:Body>
        This step is required only once when starting to work with BCD-UI; subsequent projects can re-use the same environment.
        To start working with BCD-UI you need some tools installed, mainly Java, Eclipse and Tomcat.
        Follow the <a href="../../howTo/bootstrap/doc.xml">bootstrap</a> description.
      </doc:Body>
    </doc:SubChapter>

    <doc:SubChapter title="Application setup">
      <doc:Body>
        This step is only required once when starting a new BCD-UI application; subsequent pages or reports will re-use the same environment.
        <ul>
          <li>copy of dependencies.gradle to project root folder and execute gradle refresh dependencies</li>
          <li>entries to web.xml</li>
          <li>entries to context.xml</li>
        </ul>
        That's all, see more details in these <a href="../appsetup/doc.xml">instructions</a>.
      </doc:Body>
    </doc:SubChapter>
    <doc:SubChapter title="Connect the web application to a database">
      <doc:Body>
        <p>To avoid setting up a database and test data from scratch, you can simply connect to an existing database and adjust the table and column information
        accordingly.</p>
          <p>      
        To connect the web application to a database, we configure a datasource in our tomcat. This can be done in the application context file, which is
        located in WebContent/META-INF/context.xml. 
        We configure a datasource as follows. Please adjust the username, password, driverClassName and url to match your RDMBS. 
        Please be aware that the JDBC driver file should be put in your tomcat/lib directory.
        Some databases require specific additional attributes to fully support, please have a look at
        <a target="_blank" href="https://github.com/businesscode/BCD-UI/blob/master/Server/configFiles/tomcat/context.xml">BCD-UI/Server/configFiles/tomcat/context.xml</a> there you might
        find a sample for your database. 
        </p>
        <p>
          The context file below has some settings to disable the BCD-UI and tomcat caching mechanism. 
          These are the context attributes antiResourceLocking and cachedAllowed for the tomcat server and 
          the environment settings bcdui/disableCache = true for the BCD-UI caching. 
          The tomcat configuration is for tomcat version 8. Please refer the documentation for other versions of tomcat. 
        </p>
        <pre><![CDATA[<?xml version="1.0" encoding="UTF-8" ?>]]></pre>
    
        <doc:xml>
<!--
  Context XML 
-->

<Context reloadable="true" antiResourceLocking="false">
  <Resources cachingAllowed="false"/>
  <Environment name="bcdui/defaultConnection" type="java.lang.String" value="jdbc/bcduidemo"/>
  <Environment name="bcdui/disableCache" type="java.lang.Boolean" value="true"/>
  <Resource name="jdbc/bcduidemo"
    auth="Container"
    type="javax.sql.DataSource"
    username="your_username"
    password="your_password"
    maxActive="10"
    maxIdle ="2"
    maxWait="15000"
    testOnBorrow="true"
    driverClassName="your_driver_class_name"
    connectionProperties="defaultRowPrefetch=100;"
    url="jdbc:your_database"/>
  <WatchedResource>WEB-INF/web.xml</WatchedResource>
</Context>
</doc:xml>
        <p>To continue the tutorial we assume there is table containing data like shown in the following table:</p>
        <table class="propertyList">
          <tr><th>id</th><th>dy</th><th>country</th><th>station</th><th>cars_sold</th><th>cars_repaired</th></tr>
          <tr><td>10001</td><td>2017-01-01</td><td>DE</td><td>Cologne</td><td>50.0</td><td> 25.0</td></tr>
          <tr><td>10002</td><td>2017-01-02</td><td>FR</td><td>Paris</td><td>1.0</td><td>66.0</td></tr>
          <tr><td>10003</td><td>2017-01-03</td><td>DE</td><td>Berlin</td><td>75.0</td><td>334.0</td></tr>
          <tr><td>10004</td><td>2017-01-04</td><td>US</td><td>New York</td><td>17.0</td><td>  43.0</td></tr>
          <tr><td>10005</td><td>2017-02-05</td><td>DE</td><td>Cologne</td><td>29.0</td><td>43.0</td></tr>
          <tr><td>10006</td><td>2017-02-06</td><td>ES</td><td>Barcelona</td><td>27.0</td><td>10.0</td></tr>
          <tr><td>10007</td><td>2017-02-07</td><td>DE</td><td>Cologne</td><td>21.0</td><td>13.0</td></tr>
          <tr><td>10008</td><td>2017-02-08</td><td>FR</td><td>Paris</td><td>22.0</td><td>21.0</td></tr>
          <tr><td>10009</td><td>2017-02-09</td><td>DE</td><td>Berlin</td><td>10.0</td><td>22.0</td></tr>
          <tr><td>10010</td><td>2017-02-10</td><td>US</td><td>New York</td><td>17.0</td><td>  2.0</td></tr>
          <tr><td>10011</td><td>2017-02-11</td><td>DE</td><td>Cologne</td><td>99.0</td><td>25.0</td></tr>
          <tr><td>10012</td><td>2017-02-12</td><td>ES</td><td>Barcelona</td><td>12.0</td><td>66.0</td></tr>
          <tr><td>10013</td><td>2017-03-13</td><td>DE</td><td>Cologne</td><td>9.0</td><td>334.0</td></tr>
          <tr><td>10014</td><td>2017-03-14</td><td>FR</td><td>Paris</td><td>7.0</td><td>43.0</td></tr>
          <tr><td>10015</td><td>2017-03-15</td><td>DE</td><td>Berlin</td><td>4.0</td><td>21.0</td></tr>
          <tr><td>10016</td><td>2017-03-16</td><td>US</td><td>New York</td><td>2.0</td><td> 22.0</td></tr>
          <tr><td>10017</td><td>2017-03-17</td><td>DE</td><td>Cologne</td><td>32.0</td><td>111.0</td></tr>
          <tr><td>10018</td><td>2017-03-18</td><td>ES</td><td>Barcelona</td><td>334.0</td><td>27.0</td></tr>
          <tr><td>10019</td><td>2017-03-19</td><td>DE</td><td>Cologne</td><td>43.0</td><td>21.0</td></tr>
          <tr><td>10020</td><td>2017-03-20</td><td>FR</td><td>Paris</td><td>43.0</td><td>22.0</td></tr>
          <tr><td>10021</td><td>2017-04-21</td><td>DE</td><td>Berlin</td><td>10.0</td><td>10.0</td></tr>
          <tr><td>10022</td><td>2017-04-22</td><td>US</td><td>New York</td><td>13.0</td><td>17.0</td></tr>
          <tr><td>10023</td><td>2017-04-23</td><td>DE</td><td>Cologne</td><td>15.0</td><td>5.0</td></tr>
        </table>
        
        <p>The <a href="../../binding/doc.html">BindingSet</a> mapping for this table looks like this:</p> 
        <doc:xml>
        <BindingSet 
  id="testData" 
  table="test_data"
  xmlns="http://www.businesscode.de/schema/bcdui/bindings-1.0.0">
  <C id="id" caption="Id" isKey="true" ><Column>id</Column></C>
  <C id="dy" caption="Dy"><Column>dy</Column></C>
  <C id="country" caption="Country"><Column>country</Column></C>
  <C id="station" caption="Station"><Column>station</Column></C>
  <C id="carsSold" caption="Cars sold" ><Column>cars_sold</Column></C>
  <C id="carsRepaired" caption="Cars repaired" ><Column>cars_repaired</Column></C>
</BindingSet>
        </doc:xml>
        <p>Create a similar file in WEB-INF/bcdui/bindings and name it e.g. testData.xml. By convention, the filename should be the same as the binding set id plus the file extension xml. 
         The BindingSet is validated and enriched by database catalog information during the startup of the web application.
         So typos in column names or not existing columns are detected that way. The output can be found in the tomcat console.
         <pre>2017-03-08 10:59:31  ReadBindingSet: BindingSet 'test_data': org.postgresql.util.PSQLException: ERROR: column t3.unicorns_feeded does not exist</pre>
         In case a binding set is not correct, it is ignored by BCD-UI so that any access to it would lead to an BindingNotFound Exception.
         The columns elements C are enriched during startup and BCD-UI knows the type, size, not null and other properties.
         Important for our next steps in this tutorial are the ids. So, to tell BCD-UI components what table to access we would then use
         id="testData" and if we specify a certain column we use the value of the id attribute of the desired column.  
        </p>  
      </doc:Body>
    </doc:SubChapter>
      <doc:SubChapter title="Create Login Page">
        <doc:Body>
          The next step is to enable the security filter and to create a login page. This is optional.
          Here are the detail instructions on how to setup everything:<a href="../login/doc.xml">Login Page</a>
        </doc:Body>
      </doc:SubChapter>
      <doc:SubChapter title="Create Simple Request Page">
        <doc:Body>
          The next step is to create a simple page that retrieves data filtered by some user input. Detailed instructions can be found
          <a href="../simpleReq/doc.xml">here</a>. 
        </doc:Body>
      </doc:SubChapter>
  </doc:Chapter>
</doc:Doc>